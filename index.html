<!DOCTYPE html>
<html lang="zh-Hans">
<head>

    <!--[if lt IE 9]>
        <style>body {display: none; background: none !important} </style>
        <meta http-equiv="Refresh" Content="0; url=//outdatedbrowser.com/" />
    <![endif]-->

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="format-detection" content="telephone=no" />
<meta name="author" content="RuningTitan" />


    
    


<meta property="og:type" content="website">
<meta property="og:title" content="RuningTitan&#39;s Blog">
<meta property="og:url" content="https://titanjun.top/index.html">
<meta property="og:site_name" content="RuningTitan&#39;s Blog">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="RuningTitan&#39;s Blog">

<link rel="apple-touch-icon" href= "/apple-touch-icon.png">


    <link rel="alternate" href="/atom.xml" title="RuningTitan&#39;s Blog" type="application/atom+xml">



    <link rel="shortcut icon" href="/favicon.png">



    <link href="//cdn.bootcss.com/animate.css/3.5.1/animate.min.css" rel="stylesheet">



    <link href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet">



    <script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
    <link href="//cdn.bootcss.com/pace/1.0.2/themes/blue/pace-theme-minimal.css" rel="stylesheet">


<link rel="stylesheet" href="/css/style.css">


    <style> .article { opacity: 0;} </style>


<link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">


<title>RuningTitan&#39;s Blog</title>

<script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
<script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script>

<script>
    var yiliaConfig = {
        fancybox: true,
        animate: true,
        isHome: true,
        isPost: false,
        isArchive: false,
        isTag: false,
        isCategory: false,
        fancybox_js: "//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js",
        scrollreveal: "//cdn.bootcss.com/scrollReveal.js/3.1.4/scrollreveal.min.js",
        search: true
    }
</script>


    <script> yiliaConfig.jquery_ui = [false]; </script>



    <script> yiliaConfig.rootUrl = "\/";</script>



    <script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5a9e4cdf8ccd2ba8"></script>




</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            <img src="/img/titanjun.png" class="animated zoomIn">
        </a>
        <hgroup>
          <h1 class="header-author"><a href="/">RuningTitan</a></h1>
        </hgroup>

        

        
            <form id="search-form">
            <input type="text" id="local-search-input" name="q" placeholder="search..." class="search form-control" autocomplete="off" autocorrect="off" searchonload="true" />
            <i class="fa fa-times" onclick="resetSearch()"></i>
            </form>
            <div id="local-search-result"></div>
            <p class='no-result'>No results found <i class='fa fa-spinner fa-pulse'></i></p>
        


        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>菜单</li>
                        <li>标签</li>
                        
                        <li>友情链接</li>
                        
                        
                        <li>关于我</li>
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">主页</a></li>
                        
                            <li><a href="/archives/">文章列表</a></li>
                        
                            <li><a href="/tags/">标签云</a></li>
                        
                            <li><a href="/about/">关于我</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa 简书" href="https://www.jianshu.com/u/5bd5e9ed569e" title="简书"></a>
                            
                                <a class="fa CSDN" href="http://blog.csdn.net/ShmilyCoder" title="CSDN"></a>
                            
                                <a class="fa GitHub" href="https://github.com/CoderTitan" title="GitHub"></a>
                            
                                <a class="fa 新浪微博" href="https://weibo.com/p/1005056052774133/home?from=page_100505&mod=TAB&is_all=1#place" title="新浪微博"></a>
                            
                                <a class="fa Email" href="mailto:quanjunt@163.com" title="Email"></a>
                            
                                <a class="fa QQ" href="/741700649" title="QQ"></a>
                            
                                <a class="fa 微信" href="/dan741700649" title="微信"></a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/3DTouch/">3DTouch</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/AVFoundation/">AVFoundation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Array/">Array</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/AsyncStorage/">AsyncStorage</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CATransition/">CATransition</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CIDetector/">CIDetector</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CIFilter/">CIFilter</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CSS/">CSS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Category/">Category</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CoreAnimation/">CoreAnimation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CoreImage/">CoreImage</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Dictionary/">Dictionary</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Error/">Error</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Express/">Express</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Facebook-POP/">Facebook POP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Flex/">Flex</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTML5/">HTML5</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTML5标签/">HTML5标签</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript/">JavaScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ListView/">ListView</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mac-工具/">Mac 工具</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Navigator/">Navigator</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NavigatorIOS/">NavigatorIOS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Node-js/">Node.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Objective-C/">Objective-C</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RxSwift/">RxSwift</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Scanner/">Scanner</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ScrollView/">ScrollView</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Speech/">Speech</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/String/">String</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Swift/">Swift</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Swift3-0/">Swift3.0</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Swift4-0/">Swift4.0</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TabBariOS/">TabBariOS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TabNavigator/">TabNavigator</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/UIBesizationv/">UIBesizationv</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/UICollectionView/">UICollectionView</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/UIMenuController/">UIMenuController</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/UIStackView/">UIStackView</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/UITableView/">UITableView</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vision/">Vision</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WebStorm/">WebStorm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WebView/">WebView</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Web服务器/">Web服务器</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iOS扫描器/">iOS扫描器</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/入坑/">入坑</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/响应式编程/">响应式编程</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/富文本/">富文本</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/框架/">框架</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/桥接/">桥接</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/语法/">语法</a></li></ul>
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a class="main-nav-link switch-friends-link" href="https://hexo.io">Hexo</a>
                    
                      <a class="main-nav-link switch-friends-link" href="https://pages.github.com/">GitHub</a>
                    
                      <a class="main-nav-link switch-friends-link" href="http://moxfive.xyz/">MOxFIVE</a>
                    
                    </div>
                </section>
                

                
                
                <section class="switch-part switch-part4">
                
                    <div id="js-aboutme">iOS开发工程师</div>
                </section>
                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">RuningTitan</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                <img src="/img/titanjun.png" class="animated zoomIn">
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="回到主页">RuningTitan</a></h1>
            </hgroup>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">主页</a></li>
                
                    <li><a href="/archives/">文章列表</a></li>
                
                    <li><a href="/tags/">标签云</a></li>
                
                    <li><a href="/about/">关于我</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa 简书" target="_blank" href="https://www.jianshu.com/u/5bd5e9ed569e" title="简书"></a>
                            
                                <a class="fa CSDN" target="_blank" href="http://blog.csdn.net/ShmilyCoder" title="CSDN"></a>
                            
                                <a class="fa GitHub" target="_blank" href="https://github.com/CoderTitan" title="GitHub"></a>
                            
                                <a class="fa 新浪微博" target="_blank" href="https://weibo.com/p/1005056052774133/home?from=page_100505&mod=TAB&is_all=1#place" title="新浪微博"></a>
                            
                                <a class="fa Email" target="_blank" href="mailto:quanjunt@163.com" title="Email"></a>
                            
                                <a class="fa QQ" target="_blank" href="/741700649" title="QQ"></a>
                            
                                <a class="fa 微信" target="_blank" href="/dan741700649" title="微信"></a>
                            
                        </ul>
            </nav>
        </header>                
    </div>
    <link class="menu-list" tags="标签" friends="友情链接" about="关于我"/>
</nav>
      <div class="body-wrap">
  
    <article id="post-ReactNative之AsyncStorage本地存储" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2018/01/24/ReactNative之AsyncStorage本地存储" class="article-date">
      <time datetime="2018-01-24T03:13:00.000Z" itemprop="datePublished">2018-01-24</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/01/24/ReactNative之AsyncStorage本地存储">ReactNative之AsyncStorage本地存储</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
              <ul>
<li>在RN开发中，持久化存储数据，可以使用AsyncStorage，对原生的API进行了一层封装</li>
<li>AsyncStorage是一个简单的、异步的、持久化的Key-Value存储系统，它对于App来说是全局性的</li>
</ul>
          
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/ReactNaive/">ReactNaive</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/AsyncStorage/">AsyncStorage</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JavaScript/">JavaScript</a></li></ul>
    </div>

      
        <p class="article-more-link">
          <a href="/2018/01/24/ReactNative之AsyncStorage本地存储#more">阅读全文 >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>











  
    <article id="post-Node.js搭建Web服务器" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2018/01/20/Node.js搭建Web服务器" class="article-date">
      <time datetime="2018-01-20T03:13:00.000Z" itemprop="datePublished">2018-01-20</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/01/20/Node.js搭建Web服务器">Node.js搭建Web服务器</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
              <ul>
<li>服务器种类<ul>
<li>Web服务器: 处理HTTP请求的服务器</li>
<li>Socket服务器(即时通讯): 通过socket传输<ul>
<li>即时通讯(IM): 允许两人或多人使用网路即时的传递文字讯息、档案、语音与视频交流</li>
</ul>
</li>
<li>流媒体服务器: 音视频处理程序, 接受流媒体格式文件,flv/ts等</li>
</ul>
</li>
</ul>
<p><excerpt in="" index="" |="" 首页摘要=""><br>
          
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/ReactNaive/">ReactNaive</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Express/">Express</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Node-js/">Node.js</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Web服务器/">Web服务器</a></li></ul>
    </div>

      
        <p class="article-more-link">
          <a href="/2018/01/20/Node.js搭建Web服务器#more">阅读全文 >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>











  
    <article id="post-ReactNative之TabBariOS和TabNavigator" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2018/01/06/ReactNative之TabBariOS和TabNavigator" class="article-date">
      <time datetime="2018-01-06T07:23:00.000Z" itemprop="datePublished">2018-01-06</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/01/06/ReactNative之TabBariOS和TabNavigator">ReactNative之TabBariOS和TabNavigator</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <blockquote>
<p>效果图</p>
</blockquote>
<p><img src="http://upload-images.jianshu.io/upload_images/4122543-ecacb6e40602657c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/200" alt="底部选项条.png"></p>
<h2 id="一-TabBarIOS"><a href="#一-TabBarIOS" class="headerlink" title="一. TabBarIOS"></a>一. TabBarIOS</h2><ul>
<li>底部选项条, 不能跨平台,只能iOS端使用</li>
<li>添加如下代码, 就会出现底部选项条</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">return (</span><br><span class="line">    &lt;TabBarIOS&gt;&lt;/TabBarIOS&gt;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h3 id="1-相关属性"><a href="#1-相关属性" class="headerlink" title="1. 相关属性"></a>1. 相关属性</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">barTintColor=&apos;yellow&apos;</span><br><span class="line">//标签栏的背景颜色</span><br><span class="line"></span><br><span class="line">tintColor=&apos;#ed7f30&apos;</span><br><span class="line">//当前被选中的标签图标的颜色</span><br><span class="line"></span><br><span class="line">unselectedItemTintColor=&apos;#a19a9a&apos;</span><br><span class="line">//当前没有被选中的标签图标的颜色。仅在iOS 10及以上版本有效</span><br><span class="line"></span><br><span class="line">translucent=&#123;false&#125; </span><br><span class="line">//一个布尔值，决定标签栏是否需要半透明化</span><br><span class="line">//默认为true, 有透明效果</span><br></pre></td></tr></table></figure>
<h2 id="二-选项卡-TabBarIOS-Item"><a href="#二-选项卡-TabBarIOS-Item" class="headerlink" title="二. 选项卡: TabBarIOS.Item"></a>二. 选项卡: <code>TabBarIOS.Item</code></h2><ul>
<li><code>TabBarIOS</code>: 只是表示底部的一个选项条</li>
<li><code>TabBarIOS.Item</code>: 才代表每一个选项卡</li>
<li><code>TabBarIOS.Item</code>必须包装一个View,作为点击tabBar按钮，切换的View</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;TabBarIOS.Item title=&apos;首页&apos;</span><br><span class="line">                icon=&#123;&#123;uri:&apos;btn_home_normal&apos;&#125;&#125;</span><br><span class="line">                selectedIcon=&#123;&#123;uri:&apos;btn_home_selected&apos;&#125;&#125;</span><br><span class="line">                onPress=&#123;()=&gt;&#123;</span><br><span class="line">                    this.setState(&#123;</span><br><span class="line">                        selectedIndex:0</span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125;&#125;</span><br><span class="line">                selected=&#123;this.state.selectedIndex == 0&#125;</span><br><span class="line">&gt;</span><br><span class="line">    &lt;View style=&#123;&#123;backgroundColor:&apos;red&apos;, flex:1&#125;&#125;/&gt;</span><br><span class="line">&lt;/TabBarIOS.Item&gt;</span><br></pre></td></tr></table></figure>
<h3 id="1-常用属性"><a href="#1-常用属性" class="headerlink" title="1. 常用属性"></a>1. 常用属性</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">badge string, number </span><br><span class="line">badge=&apos;我&apos;</span><br><span class="line">badge=&#123;12&#125;</span><br><span class="line">//在图标右上角显示一个红色的气泡, 可接受string和number类型</span><br><span class="line"></span><br><span class="line">title string </span><br><span class="line">//在图标下面显示的标题文字。如果定义了systemIcon属性，这个属性会被忽略。</span><br><span class="line"></span><br><span class="line">icon Image.propTypes.source </span><br><span class="line">//给当前标签指定一个自定义的图标。如果定义了systemIcon属性， 这个属性会被忽略。</span><br><span class="line"></span><br><span class="line">selectedIcon Image.propTypes.source </span><br><span class="line">//当标签被选中的时候显示的自定义图标。如果定义了systemIcon属性，这个属性会被忽略。如果定义了icon而没定义这个属性，在选中的时候图标会染上蓝色。</span><br><span class="line"></span><br><span class="line">onPress function </span><br><span class="line">//当此标签被选中时调用。你应该修改组件的状态来使得selected属性为true</span><br><span class="line"></span><br><span class="line">selected bool </span><br><span class="line">//这个属性决定了子视图是否可见。如果你看到一个空白的页面，很可能是没有选中任何一个标签</span><br><span class="line"></span><br><span class="line">systemIcon enum(&apos;bookmarks&apos;, &apos;contacts&apos;, &apos;downloads&apos;, &apos;favorites&apos;, &apos;featured&apos;, &apos;history&apos;, &apos;more&apos;, &apos;most-recent&apos;, &apos;most-viewed&apos;, &apos;recents&apos;, &apos;search&apos;, &apos;top-rated&apos;) </span><br><span class="line">//一些预定义的系统图标。注意如果你使用了此属性，标题和自定义图标都会被覆盖为系统定义的值。</span><br></pre></td></tr></table></figure>
<ul>
<li>只要设置对应的tabBarItem的selected为true,就会自动跳转到对应界面<ul>
<li>注意：tabBarItem的selected属性不能写死，可以搞个角标记录当前选中那个角标</li>
</ul>
</li>
<li>监听tabBarItem的点击，修改selected属性</li>
<li>相关示例代码</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">export default class App extends Component&lt;&#123;&#125;&gt; &#123;</span><br><span class="line">    constructor(props)&#123;</span><br><span class="line">        super(props)</span><br><span class="line">        this.state = &#123;</span><br><span class="line">            selectedIndex:0</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // 当一个组件要显示的时候,就会自动调用render,渲染组件</span><br><span class="line">    render() &#123;</span><br><span class="line">        return (</span><br><span class="line">            &lt;TabBarIOS tintColor=&apos;#ed7f30&apos;&gt;</span><br><span class="line">                &lt;TabBarIOS.Item title=&apos;首页&apos;</span><br><span class="line">                         icon=&#123;&#123;uri:&apos;btn_home_normal&apos;&#125;&#125;</span><br><span class="line">                                selectedIcon=&#123;&#123;uri:&apos;btn_home_selected&apos;&#125;&#125;</span><br><span class="line">                                badge=&apos;我&apos;</span><br><span class="line">                                onPress=&#123;()=&gt;&#123;</span><br><span class="line">                                    this.setState(&#123;</span><br><span class="line">                                        selectedIndex:0</span><br><span class="line">                                    &#125;)</span><br><span class="line">                                &#125;&#125;</span><br><span class="line">                                selected=&#123;this.state.selectedIndex == 0&#125;</span><br><span class="line">                &gt;</span><br><span class="line">                    &lt;View style=&#123;&#123;backgroundColor:&apos;red&apos;, flex:1&#125;&#125;/&gt;</span><br><span class="line">                &lt;/TabBarIOS.Item&gt;</span><br><span class="line"></span><br><span class="line">                &lt;TabBarIOS.Item title=&apos;直播&apos;</span><br><span class="line">                                icon=&#123;&#123;uri:&apos;btn_column_normal&apos;&#125;&#125;</span><br><span class="line">                                selectedIcon=&#123;&#123;uri:&apos;btn_column_selected&apos;&#125;&#125;</span><br><span class="line">                                badge=&#123;12&#125;</span><br><span class="line">                                onPress=&#123;()=&gt;&#123;</span><br><span class="line">                                    this.setState(&#123;</span><br><span class="line">                                        selectedIndex:1</span><br><span class="line">                                    &#125;)</span><br><span class="line">                                &#125;&#125;</span><br><span class="line">                                selected=&#123;this.state.selectedIndex == 1&#125;</span><br><span class="line">                &gt;</span><br><span class="line">                    &lt;View style=&#123;&#123;backgroundColor:&apos;yellow&apos;, flex:1&#125;&#125;/&gt;</span><br><span class="line">                &lt;/TabBarIOS.Item&gt;</span><br><span class="line">            &lt;/TabBarIOS&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="三-TabNavigator"><a href="#三-TabNavigator" class="headerlink" title="三. TabNavigator"></a>三. TabNavigator</h2><ul>
<li>TabBarIOS只能用于iOS平台，如果在安卓上也需要有TabBar,就不能使用TabBarIOS。</li>
<li>TabNavigator:一个跨平台的TabBar第三方框架组件，可以用于iOS和安卓平台</li>
<li><a href="https://github.com/expo/react-native-tab-navigator" target="_blank" rel="noopener">TabNavigator地址</a></li>
</ul>
<h3 id="1-安装和导入"><a href="#1-安装和导入" class="headerlink" title="1. 安装和导入"></a>1. 安装和导入</h3><h4 id="1-1-安装第三方框架"><a href="#1-1-安装第三方框架" class="headerlink" title="1-1. 安装第三方框架"></a>1-1. 安装第三方框架</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add react-native-tab-navigator</span><br></pre></td></tr></table></figure>
<h4 id="1-2-导入框架"><a href="#1-2-导入框架" class="headerlink" title="1-2. 导入框架"></a>1-2. 导入框架</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import TabNavigator from &apos;react-native-tab-navigator&apos;;</span><br></pre></td></tr></table></figure>
<h3 id="2-TabNavigator常用属性"><a href="#2-TabNavigator常用属性" class="headerlink" title="2. TabNavigator常用属性"></a>2. TabNavigator常用属性</h3><table>
<thead>
<tr>
<th>属性</th>
<th>默认值</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>sceneStyle</td>
<td>inherited</td>
<td>object (style)</td>
<td>定义渲染的场景</td>
</tr>
<tr>
<td>tabBarStyle</td>
<td>inherited</td>
<td>object (style)</td>
<td>为TabBar定义样式</td>
</tr>
<tr>
<td>tabBarShadowStyle</td>
<td>inherited</td>
<td>object (style)</td>
<td>为TabBar定义阴影样式</td>
</tr>
<tr>
<td>hidesTabTouch</td>
<td>false</td>
<td>boolean</td>
<td>禁用选项卡的onPress</td>
</tr>
</tbody>
</table>
<h3 id="3-TabNavigator-Item常用属性"><a href="#3-TabNavigator-Item常用属性" class="headerlink" title="3. TabNavigator.Item常用属性"></a>3. TabNavigator.Item常用属性</h3><table>
<thead>
<tr>
<th>属性</th>
<th>默认值</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>renderIcon</td>
<td>none</td>
<td>function</td>
<td>选项卡图标</td>
</tr>
<tr>
<td>renderSelectedIcon</td>
<td>none</td>
<td>function</td>
<td>选项卡选中状态图标</td>
</tr>
<tr>
<td>badgeText</td>
<td>none</td>
<td>string or number</td>
<td>图标右上角显示</td>
</tr>
<tr>
<td>title</td>
<td>none</td>
<td>string</td>
<td>tabbar标题</td>
</tr>
<tr>
<td>titleStyle</td>
<td>inherited</td>
<td>style</td>
<td>标题样式</td>
</tr>
<tr>
<td>selectedTitleStyle</td>
<td>inherited</td>
<td>style</td>
<td>选中状态标题样式</td>
</tr>
<tr>
<td>tabStyle</td>
<td>inherited</td>
<td>style</td>
<td>选项卡样式</td>
</tr>
<tr>
<td>hidesTabTouch</td>
<td>false</td>
<td>boolean</td>
<td>是否选中该tabbar</td>
</tr>
<tr>
<td>onPress</td>
<td>none</td>
<td>function</td>
<td>选项卡的点击方法</td>
</tr>
<tr>
<td>allowFontScaling</td>
<td>false</td>
<td>boolean</td>
<td>允许标题的字体缩放</td>
</tr>
</tbody>
</table>
<ul>
<li>使用示例</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">render() &#123;</span><br><span class="line">        return (</span><br><span class="line">            &lt;TabNavigator&gt;</span><br><span class="line">                &lt;TabNavigator.Item title=&apos;首页&apos;</span><br><span class="line">                                   selected=&#123;this.state.selectedIndex == 0&#125;</span><br><span class="line">                                   titleStyle=&#123;&#123;color:&apos;#9d9d9d&apos;&#125;&#125;</span><br><span class="line">                                   selectedTitleStyle=&#123;&#123;color:&apos;#ed7f30&apos;&#125;&#125;</span><br><span class="line">                                   badgeText=&apos;首页&apos;</span><br><span class="line">                                   allowFontScaling=&#123;false&#125;</span><br><span class="line">                                   renderIcon=&#123;()=&gt;</span><br><span class="line">                                       &lt;Image source=&#123;&#123;uri:&apos;btn_home_normal&apos;&#125;&#125; style=&#123;styles.iconStyle&#125;/&gt;</span><br><span class="line">                                   &#125;</span><br><span class="line">                                   renderSelectedIcon=&#123;()=&gt;</span><br><span class="line">                                       &lt;Image source=&#123;&#123;uri:&apos;btn_home_selected&apos;&#125;&#125; style=&#123;styles.iconStyle&#125;/&gt;</span><br><span class="line">                                   &#125;</span><br><span class="line">                                   onPress=&#123;()=&gt;</span><br><span class="line">                                       this.setState(&#123;</span><br><span class="line">                                           selectedIndex:0</span><br><span class="line">                                       &#125;)</span><br><span class="line">                                   &#125;</span><br><span class="line">                &gt;</span><br><span class="line">                    &lt;View style=&#123;[styles.viewStyle, &#123;backgroundColor:&apos;red&apos;&#125;]&#125;&gt;</span><br><span class="line">                        &lt;Text&gt;首页&lt;/Text&gt;</span><br><span class="line">                    &lt;/View&gt;</span><br><span class="line">                &lt;/TabNavigator.Item&gt;</span><br><span class="line"></span><br><span class="line">                &lt;TabNavigator.Item title=&apos;我的&apos;</span><br><span class="line">                                   selected=&#123;this.state.selectedIndex == 1&#125;</span><br><span class="line">                                   titleStyle=&#123;&#123;color:&apos;#9d9d9d&apos;&#125;&#125;</span><br><span class="line">                                   selectedTitleStyle=&#123;&#123;color:&apos;#ed7f30&apos;&#125;&#125;</span><br><span class="line">                                   badgeText=&#123;10&#125;</span><br><span class="line">                                   renderIcon=&#123;()=&gt;</span><br><span class="line">                                       &lt;Image source=&#123;&#123;uri:&apos;btn_user_normal&apos;&#125;&#125; style=&#123;styles.iconStyle&#125;/&gt;</span><br><span class="line">                                   &#125;</span><br><span class="line">                                   renderSelectedIcon=&#123;()=&gt;</span><br><span class="line">                                       &lt;Image source=&#123;&#123;uri:&apos;btn_user_selected&apos;&#125;&#125; style=&#123;styles.iconStyle&#125;/&gt;</span><br><span class="line">                                   &#125;</span><br><span class="line">                                   onPress=&#123;()=&gt;</span><br><span class="line">                                       this.setState(&#123;</span><br><span class="line">                                           selectedIndex:1</span><br><span class="line">                                       &#125;)</span><br><span class="line">                                   &#125;</span><br><span class="line">                &gt;</span><br><span class="line">                    &lt;View style=&#123;[styles.viewStyle, &#123;backgroundColor:&apos;green&apos;&#125;]&#125;&gt;</span><br><span class="line">                        &lt;Text&gt;我的&lt;/Text&gt;</span><br><span class="line">                    &lt;/View&gt;</span><br><span class="line"></span><br><span class="line">                &lt;/TabNavigator.Item&gt;</span><br><span class="line">            &lt;/TabNavigator&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/ReactNaive/">ReactNaive</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CSS/">CSS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/TabBariOS/">TabBariOS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/TabNavigator/">TabNavigator</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>











  
    <article id="post-React Native之导航组件NavigatorIOS和Navigator" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2018/01/05/React Native之导航组件NavigatorIOS和Navigator" class="article-date">
      <time datetime="2018-01-05T09:04:00.000Z" itemprop="datePublished">2018-01-05</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/01/05/React Native之导航组件NavigatorIOS和Navigator">React Native之导航组件NavigatorIOS和Navigator</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p><img src="http://upload-images.jianshu.io/upload_images/4122543-d1e3e673185be43f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/200" alt="Navigator.png"></p>
<h2 id="一-NavigatorIOS"><a href="#一-NavigatorIOS" class="headerlink" title="一. NavigatorIOS"></a>一. NavigatorIOS</h2><ul>
<li><code>NavigatorIOS</code>是一个包装<code>UINavigationController</code>，能够实现一个导航堆栈, 且只能在iOS上使用的组件</li>
<li>它的工作原理与使用本地应用程序<code>UINavigationController</code>的效果完全相同，从<code>UIKIt</code>提供相同的动画和行为</li>
</ul>
<h3 id="1-常用属性"><a href="#1-常用属性" class="headerlink" title="1. 常用属性"></a>1. 常用属性</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">//样式, 必须设置&#123;flex:1&#125;, 否则看不到子控件</span><br><span class="line">style=&#123;&#123;flex:1&#125;&#125;</span><br><span class="line"></span><br><span class="line">//导航条的背景颜色</span><br><span class="line">barTintColor=&apos;yellow&apos;</span><br><span class="line"></span><br><span class="line">//为true , 隐藏导航栏</span><br><span class="line">navigationBarHidden=&#123;false&#125;</span><br><span class="line"></span><br><span class="line">//是否隐藏阴影，true／false。</span><br><span class="line">shadowHidden=&#123;false&#125;</span><br><span class="line"></span><br><span class="line">//导航栏上按钮的颜色设置</span><br><span class="line">tintColor=&apos;black&apos;</span><br><span class="line"></span><br><span class="line">//导航栏上标题的颜色设置</span><br><span class="line">titleTextColor=&apos;blue&apos;</span><br><span class="line"></span><br><span class="line">//导航栏是否是半透明的，true／false。</span><br><span class="line">translucent=&#123;true&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2-NavigatorIOS的使用"><a href="#2-NavigatorIOS的使用" class="headerlink" title="2. NavigatorIOS的使用"></a>2. NavigatorIOS的使用</h3><ul>
<li>必须初始化路由: <code>initialRoute{}</code></li>
<li>注意:<code>component</code>，需要传入组件，自定义组件</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">//用于初始化路由。其参数对象中的各个属性如下：</span><br><span class="line">initialRoute：</span><br><span class="line"> &#123;</span><br><span class="line">  component: function, //加载的视图组件</span><br><span class="line">  title: string, //当前视图的标题</span><br><span class="line">  passPros: object, //传递的数据</span><br><span class="line">  backButtonIcon: Image.propTypes.source, // 后退按钮图标</span><br><span class="line">  backButtonTitle: string, //后退按钮标题</span><br><span class="line">  leftButtonIcon: Image.propTypes.soruce, // 左侧按钮图标</span><br><span class="line">  leftButtonTitle: string, //左侧按钮标题</span><br><span class="line">  onLeftButtonPress: function, //左侧按钮点击事件</span><br><span class="line">  rightButtonIcon: Image.propTypes.soruce, // 右侧按钮图标</span><br><span class="line">  rightButtonTitle: string, //右侧按钮标题</span><br><span class="line">  onRightButtonPress: function, //右侧按钮点击事件</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>使用示例</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;NavigatorIOS initialRoute=&#123;</span><br><span class="line">        &#123;</span><br><span class="line">        //JunNavigatorView: 为自定义的组件</span><br><span class="line">            component:JunNavigatorView,</span><br><span class="line">            title: &apos;首页&apos;,</span><br><span class="line">            leftButtonTitle:&apos;左按钮&apos;,</span><br><span class="line">            rightButtonTitle:&apos;跳转&apos;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">/&gt;</span><br></pre></td></tr></table></figure>
<h3 id="3-页面间的跳转"><a href="#3-页面间的跳转" class="headerlink" title="3. 页面间的跳转"></a>3. 页面间的跳转</h3><ul>
<li>获取Navigator，只有它才能跳转</li>
<li>只要是导航控制器下的组件，都可以通过props获取</li>
<li><code>this.props.navigator</code></li>
<li>界面跳转方法</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">pust(route)：//加载一个新的页面（视图或者路由）并且路由到该页面。</span><br><span class="line">pop()：//返回到上一个页面。</span><br><span class="line">popN(n)：//一次性返回N个页面。当 N=1 时，相当于 pop() 方法的效果。</span><br><span class="line">replace(route)：//替换当前的路由。</span><br><span class="line">replacePrevious（route）：//替换前一个页面的视图并且回退过去。</span><br><span class="line">resetTo(route)：//取代最顶层的路由并且回退过去。</span><br><span class="line">popToTop()：//回到最上层视图。</span><br></pre></td></tr></table></figure>
<ul>
<li>使用示例</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;Text onPress=&#123;()=&gt;&#123;</span><br><span class="line">    this.props.navigator.push(&#123;</span><br><span class="line">        component:JunTwoView,</span><br><span class="line">        title:&apos;第二页面&apos;</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">&#125;&#125;</span><br><span class="line">&gt;点击跳转到第二个页面&lt;/Text&gt;</span><br></pre></td></tr></table></figure>
<h2 id="二-Navigator"><a href="#二-Navigator" class="headerlink" title="二. Navigator"></a>二. Navigator</h2><ul>
<li><code>Navigator</code>很好解决了<code>NavigatorIOS</code>不能跨平台和自定义的问题</li>
<li>RN开发中通常使用<code>Navigator</code></li>
<li>Navigator作用：只提供跳转功能，支持iOS,安卓</li>
<li>导航条需要自定义，需要导航条的界面，自己添加<br>只要一个控件，包装成Navigator就能获取跳转功能</li>
</ul>
<h3 id="1-Navigator导入问题"><a href="#1-Navigator导入问题" class="headerlink" title="1. Navigator导入问题"></a>1. Navigator导入问题</h3><ul>
<li>在0,43版本之前(包括0.43), <code>Navigator</code>在<code>react-native</code>库中</li>
<li>从0.44版本开始<code>Navigator</code>就被移入了<code>react-native-deprecated-custom-components</code>库中</li>
<li>使用前,先进入当前项目文件，安装Navigator所在的库</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//终端输入</span><br><span class="line">yarn add react-native-deprecated-custom-components</span><br><span class="line"></span><br><span class="line">//下面方法可能已经失效(亲测失败)</span><br><span class="line">npm install react-native-deprecated-custom-components --save</span><br></pre></td></tr></table></figure>
<ul>
<li>下载完成后，导入<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import &#123;Navigator&#125; from &apos;react-native-deprecated-custom-components&apos;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="2-Navigator的使用"><a href="#2-Navigator的使用" class="headerlink" title="2. Navigator的使用"></a>2. Navigator的使用</h3><h4 id="2-1-initialRoute：-初始化路由"><a href="#2-1-initialRoute：-初始化路由" class="headerlink" title="2-1. initialRoute： 初始化路由"></a>2-1. <code>initialRoute</code>： 初始化路由</h4><ul>
<li>定义启动时加载的路由</li>
<li>路由是导航栏用来识别渲染场景的一个对象</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;Navigator initialRoute=&#123;&#123;component: JunOneView&#125;&#125;/&gt;</span><br></pre></td></tr></table></figure>
<h4 id="2-2-配置场景动画和手势"><a href="#2-2-配置场景动画和手势" class="headerlink" title="2-2. 配置场景动画和手势"></a>2-2. 配置场景动画和手势</h4><ul>
<li>可选的函数, 设置跳转方向</li>
<li>会带有两个参数调用，一个是当前的路由，一个是当前的路由栈</li>
<li>返回一个场景配置对象</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">_configureScene(route, routeStack) &#123;</span><br><span class="line">    return Navigator.SceneConfigs.PushFromLeft;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>其他跳转方向参数<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Navigator.SceneConfigs.PushFromRight (默认)</span><br><span class="line">Navigator.SceneConfigs.FloatFromRight</span><br><span class="line">Navigator.SceneConfigs.FloatFromLeft</span><br><span class="line">Navigator.SceneConfigs.FloatFromBottom</span><br><span class="line">Navigator.SceneConfigs.FloatFromBottomAndroid</span><br><span class="line">Navigator.SceneConfigs.FadeAndroid</span><br><span class="line">Navigator.SceneConfigs.HorizontalSwipeJump</span><br><span class="line">Navigator.SceneConfigs.HorizontalSwipeJumpFromRight</span><br><span class="line">Navigator.SceneConfigs.VerticalUpSwipeJump</span><br><span class="line">Navigator.SceneConfigs.VerticalDownSwipeJump</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="2-3-渲染指定路由的场景"><a href="#2-3-渲染指定路由的场景" class="headerlink" title="2-3. 渲染指定路由的场景"></a>2-3. 渲染指定路由的场景</h4><ul>
<li>必要参数, 调用的参数是路由和导航器</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">_renderScene(route, navigator) &#123;</span><br><span class="line">        // ...扩展符, 作用:如果是对象,就获取对象中所有值,如果是数组,就获取数组中所有值</span><br><span class="line">    return (&lt;route.component navigator=&#123;navigator&#125; &#123;... route.props&#125;/&gt;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="2-4-设置导航尺寸"><a href="#2-4-设置导航尺寸" class="headerlink" title="2-4. 设置导航尺寸"></a>2-4. 设置导航尺寸</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">style=&#123;&#123;flex:1&#125;&#125;</span><br></pre></td></tr></table></figure>
<h3 id="3-其他属性或方法"><a href="#3-其他属性或方法" class="headerlink" title="3. 其他属性或方法"></a>3. 其他属性或方法</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">onDidFocus function </span><br><span class="line">//每当导航切换完成或初始化之后，调用此回调，参数为新场景的路由。</span><br><span class="line"></span><br><span class="line">onWillFocus function </span><br><span class="line">//会在导航切换之前调用，参数为目标路由。</span><br></pre></td></tr></table></figure>
<h2 id="三-延展符"><a href="#三-延展符" class="headerlink" title="三. 延展符"></a>三. 延展符</h2><ul>
<li>文中用到了一个操作符: <code>...</code>即为延展符</li>
<li>延展符的作用<ul>
<li>遍历数组</li>
<li>遍历对象的属性,一个一个传值给下一个控件</li>
</ul>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var arr1 = [1, 2, 3, 4, 5]</span><br><span class="line">var arr2 = [0]</span><br><span class="line">        </span><br><span class="line">arr2.push(...arr1)</span><br><span class="line">console.log(arr2)</span><br><span class="line">//输出结果: [0, 1, 2, 3, 4, 5]</span><br></pre></td></tr></table></figure>
<ul>
<li>作用等同于<code>JavaScript</code>数组中的concat方法</li>
<li>区别在于<code>concat</code>只能作用于数组</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var arr1 = [1, 2, 3, 4, 5]</span><br><span class="line">var arr2 = [0]</span><br><span class="line"></span><br><span class="line">// arr2.push(...arr1)</span><br><span class="line">arr2 = arr2.concat(arr1)</span><br><span class="line">console.log(arr2)</span><br><span class="line">//输出结果: [0, 1, 2, 3, 4, 5]</span><br></pre></td></tr></table></figure>
<blockquote>
<h4 id="关于JavaScript的数组语法-请查看我的另一篇文章JavaScript基本语法01"><a href="#关于JavaScript的数组语法-请查看我的另一篇文章JavaScript基本语法01" class="headerlink" title="关于JavaScript的数组语法, 请查看我的另一篇文章JavaScript基本语法01"></a>关于<code>JavaScript</code>的数组语法, 请查看我的另一篇文章<a href="https://www.jianshu.com/p/b15d884772c2" target="_blank" rel="noopener">JavaScript基本语法01</a></h4></blockquote>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/ReactNaive/">ReactNaive</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CSS/">CSS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Navigator/">Navigator</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/NavigatorIOS/">NavigatorIOS</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>











  
    <article id="post-ReactNaive之ScrollView和ListView" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2018/01/03/ReactNaive之ScrollView和ListView" class="article-date">
      <time datetime="2018-01-03T08:54:00.000Z" itemprop="datePublished">2018-01-03</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/01/03/ReactNaive之ScrollView和ListView">ReactNaive之ScrollView和ListView</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p><img src="http://upload-images.jianshu.io/upload_images/4122543-45456c9ba9799576.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/200" alt="ListView.png"></p>
<h2 id="一-ScrollView"><a href="#一-ScrollView" class="headerlink" title="一. ScrollView"></a>一. ScrollView</h2><ul>
<li>记住ScrollView必须有一个确定的高度才能正常工作，因为它实际上所做的就是将一系列不确定高度的子组件装进一个确定高度的容器（通过滚动操作）</li>
<li>要给一个ScrollView确定一个高度的话，要么直接给它设置高度（不建议），要么确定所有的父容器都有确定的高度</li>
<li><h3 id="1-ScrollView常用的属性"><a href="#1-ScrollView常用的属性" class="headerlink" title="1. ScrollView常用的属性"></a>1. ScrollView常用的属性</h3></li>
</ul>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">horizontal <span class="keyword">bool</span> </span><br><span class="line"><span class="comment">//当此属性为true的时候，所有的子视图会在水平方向上排成一行，而不是默认的在垂直方向上排成一列。默认值为false。</span></span><br><span class="line"></span><br><span class="line">showsHorizontalScrollIndicator <span class="keyword">bool</span></span><br><span class="line"><span class="comment">//当此属性为true的时候，显示一个水平方向的滚动条。</span></span><br><span class="line">showsVerticalScrollIndicator <span class="keyword">bool</span></span><br><span class="line"><span class="comment">//当此属性为true的时候，显示一个垂直方向的滚动条。</span></span><br><span class="line"></span><br><span class="line">alwaysBounceHorizontal <span class="keyword">bool</span> </span><br><span class="line"><span class="comment">//当此属性为true时，水平方向即使内容比滚动视图本身还要小，也可以弹性地拉动一截。当horizontal=&#123;true&#125;时默认值为true，否则为false。</span></span><br><span class="line"></span><br><span class="line">refreshControl element </span><br><span class="line"><span class="comment">//指定RefreshControl组件，用于为ScrollView提供下拉刷新功能</span></span><br><span class="line"></span><br><span class="line">(ios) alwaysBounceVertical <span class="keyword">bool</span></span><br><span class="line"><span class="comment">//当此属性为true时，垂直方向即使内容比滚动视图本身还要小，也可以弹性地拉动一截。</span></span><br><span class="line"><span class="comment">//当horizontal=&#123;true&#125;时默认值为false，否则为true。</span></span><br><span class="line"></span><br><span class="line">(ios) automaticallyAdjustContentInsets <span class="keyword">bool</span></span><br><span class="line"><span class="comment">//当滚动视图放在一个导航条或者工具条后面的时候，iOS系统是否要自动调整内容的范围。默认值为true。（译注：如果你的ScrollView或ListView的头部出现莫名其妙的空白，尝试将此属性置为false）</span></span><br><span class="line"></span><br><span class="line">(ios) bounces <span class="keyword">bool</span></span><br><span class="line"><span class="comment">//当值为true时，如果内容范围比滚动视图本身大，在到达内容末尾的时候，可以弹性地拉动一截。如果为false，尾部的所有弹性都会被禁用，即使alwaysBounce*属性为true。默认值为true。</span></span><br><span class="line"></span><br><span class="line">(ios) bouncesZoom <span class="keyword">bool</span> </span><br><span class="line"><span class="comment">//当值为true时，使用手势缩放内容可以超过min/max的限制，然后在手指抬起之后弹回min/max的缩放比例。否则的话，缩放不能超过限制。</span></span><br><span class="line"></span><br><span class="line">(ios) contentInset &#123;top: number, left: number, bottom: number, right: number&#125; </span><br><span class="line"><span class="comment">//内容范围相对滚动视图边缘的坐标。默认为&#123;0, 0, 0, 0&#125;</span></span><br><span class="line"></span><br><span class="line">(ios) contentOffset PointPropType</span><br><span class="line"><span class="comment">//用来手动设置初始的滚动坐标。默认值为&#123;x: 0, y: 0&#125;</span></span><br><span class="line"></span><br><span class="line">pagingEnabled <span class="keyword">bool</span></span><br><span class="line"><span class="comment">//当值为true时，滚动条会停在滚动视图的尺寸的整数倍位置。这个可以用在水平分页上。默认值为false。</span></span><br><span class="line"></span><br><span class="line">scrollEnabled <span class="keyword">bool</span></span><br><span class="line"><span class="comment">//当值为false的时候，内容不能滚动，默认值为true。</span></span><br><span class="line"></span><br><span class="line">(ios) scrollEventThrottle number</span><br><span class="line"><span class="comment">//这个属性控制在滚动过程中，scroll事件被调用的频率（单位是每秒事件数量）。更大的数值能够更及时的跟踪滚动位置，不过可能会带来性能问题，因为更多的信息会通过bridge传递。默认值为0，意味着每次视图被滚动，scroll事件只会被调用一次。</span></span><br><span class="line"></span><br><span class="line">(ios)scrollIndicatorInsets &#123;top: number, left: number, bottom: number, right: number&#125; </span><br><span class="line"><span class="comment">//决定滚动条距离视图边缘的坐标。这个值应该和contentInset一样。默认值为&#123;0, 0, 0, 0&#125;。</span></span><br><span class="line"></span><br><span class="line">(ios) scrollsToTop <span class="keyword">bool</span> </span><br><span class="line"><span class="comment">//当此值为true时，点击状态栏的时候视图会滚动到顶部。默认值为true。</span></span><br><span class="line"></span><br><span class="line">stickyHeaderIndices [number]</span><br><span class="line"><span class="comment">//一个子视图下标的数组，用于决定哪些成员会在滚动之后固定在屏幕顶端。</span></span><br><span class="line"><span class="comment">//举个例子，传递stickyHeaderIndices=&#123;[0]&#125;会让第一个成员固定在滚动视图顶端。</span></span><br><span class="line"><span class="comment">//这个属性不能和horizontal=&#123;true&#125;一起使用。</span></span><br><span class="line"></span><br><span class="line">(ios) maximumZoomScale number </span><br><span class="line"><span class="comment">//允许的最大缩放比例。默认值为1.0。</span></span><br><span class="line"></span><br><span class="line">(ios) minimumZoomScale number </span><br><span class="line"><span class="comment">//允许的最小缩放比例。默认值为1.0。</span></span><br></pre></td></tr></table></figure>
<h3 id="2-ScrollView常用的方法"><a href="#2-ScrollView常用的方法" class="headerlink" title="2. ScrollView常用的方法"></a>2. ScrollView常用的方法</h3><ul>
<li>开发中，常需要在滚动的时候做事情，那怎么监听ScrollView滚动</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">// 监听滚动开始</span><br><span class="line">onMomentumScrollBegin=&#123;this._onMomentumScrollBegin.bind(this)&#125;</span><br><span class="line"></span><br><span class="line">// 监听滚动结束</span><br><span class="line">onMomentumScrollEnd=&#123;this._onMomentumScrollEnd.bind(this)&#125;</span><br><span class="line"></span><br><span class="line">// 监听开始拖拽</span><br><span class="line">onScrollBeginDrag=&#123;this._onScrollBeginDrag.bind(this)&#125;</span><br><span class="line"></span><br><span class="line">// 监听结束拖拽</span><br><span class="line">onScrollEndDrag=&#123;this._onScrollEndDrag.bind(this)&#125;</span><br><span class="line"></span><br><span class="line">// 监听滚动动画完成</span><br><span class="line">onScrollAnimationEnd=&#123;this._onScrollAnimationEnd.bind(this)&#125;</span><br><span class="line"></span><br><span class="line">onMomentumScrollStart?: function </span><br><span class="line">//滚动动画开始时调用此函数。</span><br><span class="line"></span><br><span class="line">onMomentumScrollEnd?: function </span><br><span class="line">//滚动动画结束时调用此函数。</span><br><span class="line"></span><br><span class="line">// 监听滚动的时候</span><br><span class="line">onScroll=&#123;this._onScroll.bind(this)&#125;</span><br><span class="line"></span><br><span class="line">// 设置滚动频率,一滚动就监听,需要和onScroll配套使用</span><br><span class="line">scrollEventThrottle=&#123;1&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">scrollTo(y: number | &#123; x?: number, y?: number, animated?: boolean &#125;, x: number, animated: boolean) </span><br><span class="line">//滚动到指定的x, y偏移处。第三个参数为是否启用平滑滚动动画。</span><br><span class="line">//使用示例:</span><br><span class="line">scrollTo(&#123;x: 0, y: 0, animated: true&#125;)</span><br><span class="line"></span><br><span class="line">scrollToEnd(options?) </span><br><span class="line">//滚动到视图底部（水平方向的视图则滚动到最右边）。</span><br><span class="line">//加上动画参数 scrollToEnd(&#123;animated: true&#125;)则启用平滑滚动动画，或是调用 scrollToEnd(&#123;animated: false&#125;)来立即跳转。如果不使用参数，则animated选项默认启用。</span><br></pre></td></tr></table></figure>
<h3 id="3-获取原生事件"><a href="#3-获取原生事件" class="headerlink" title="3. 获取原生事件"></a>3. 获取原生事件</h3><ul>
<li>滚动的时候,会传入一个合成事件作为监听滚动方法的参数，每个方法都会有这个合成事件</li>
<li>通过合成事件能获取原生事件nativeEvent,原生事件nativeEvent会有我们想要的信息.</li>
<li>什么是合成事件：在RN中，事件的处理由其内部自己实现的事件系统完成，触发的事件都叫做 合成事件（SyntheticEvent）</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">// 滚动完成的时候调用</span><br><span class="line">_onMomentumScrollEnd(e)&#123;</span><br><span class="line">    // 获取原生事件</span><br><span class="line">    var nativeEvent = e.nativeEvent</span><br><span class="line">    //获取当前偏移量</span><br><span class="line">    var contentX = nativeEvent.contentOffset.x</span><br><span class="line">    //当前页</span><br><span class="line">    var page = contentX / kScreenWidth</span><br><span class="line"></span><br><span class="line">    this.setState(&#123;</span><br><span class="line">        currentPage:page</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="二-ListView"><a href="#二-ListView" class="headerlink" title="二. ListView"></a>二. ListView</h2><ul>
<li>官方文档提示: 在0.46版本开始此组件已过期, 并推荐使用<code>FlatList</code>或<code>SectionList</code>替代, 但是在0.51版本依然可以使用</li>
<li><code>ListView</code>: 一个核心组件，用于高效地显示一个可以垂直滚动的变化的数据列表</li>
<li>ListView内部是通过<code>ListViewDataSource</code>这个对象，显示数据，因此使用ListView必须先创建<code>ListViewDataSource</code>对象。</li>
<li><code>ListViewDataSource</code>构造方法(创建对象):可选择性传入4个参数,描述怎么提取数据，怎么刷新cell</li>
<li>这些参数：都是函数，当产生对应的事件的时候，会自动执行这些函数.</li>
</ul>
<h3 id="1-ListView常用的属性和方法"><a href="#1-ListView常用的属性和方法" class="headerlink" title="1. ListView常用的属性和方法"></a>1. ListView常用的属性和方法</h3><ul>
<li>ListView可以使用所有ScrollView的属性。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">initialListSize number </span><br><span class="line">//指定在组件刚挂载的时候渲染多少行数据。用这个属性来确保首屏显示合适数量的数据，而不是花费太多帧逐步显示出来</span><br><span class="line"></span><br><span class="line">dataSource ListViewDataSource </span><br><span class="line">//ListView.DataSource实例（列表依赖的数据源）</span><br></pre></td></tr></table></figure>
<ul>
<li><code>ListViewDataSource</code>构造函数可以接受下列四种参数（都是可选）：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">getRowData(dataBlob, sectionID, rowID);</span><br><span class="line">//怎么获取行数据</span><br><span class="line">getSectionHeaderData(dataBlob, sectionID);</span><br><span class="line">//怎么获取每一组头部数据</span><br><span class="line">rowHasChanged(prevRowData, nextRowData);</span><br><span class="line">//决定什么情况行数据才发生改变，当行数据发生改变，就会绘制下一行cell</span><br><span class="line">sectionHeaderHasChanged(prevSectionData, nextSectionData);</span><br><span class="line">//决定什么情况头部数据才发生改变，当行数据发生改变，就会绘制下一行cell</span><br></pre></td></tr></table></figure>
<ul>
<li><code>ListViewDataSource</code>为<code>ListView</code>组件提供高性能的数据处理和访问。我们需要调用clone方法从原始输入数据中抽取数据来创建<code>ListViewDataSource</code>对象。</li>
<li>要更新<code>datasource</code>中的数据，请（每次都重新）调用<code>cloneWithRows</code>方法（如果用到了section，则对应<code>cloneWithRowsAndSections</code>方法）clone方法会自动提取新数据并进行逐行对比（使用<code>rowHasChanged</code>方法中的策略），这样<code>ListView</code>就知道哪些行需要重新渲染了</li>
<li>注意：初始化<code>ListViewDataSource</code>的时候，如果不需要修改提取数据的方式，只需要实现<code>rowHasChanged</code>，告诉什么时候刷新下一行数据.</li>
<li>注意：默认<code>ListViewDataSource</code>有提取数据方式，可以使用默认的提取方式.</li>
</ul>
<h3 id="2-ListView使用步骤"><a href="#2-ListView使用步骤" class="headerlink" title="2. ListView使用步骤"></a>2. ListView使用步骤</h3><ul>
<li>1). 创建数据源</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">//1. 创建数据源对象</span><br><span class="line">var datas = new ListView.DataSource(&#123;</span><br><span class="line">    //设置数据改变的时候刷新下一行数据</span><br><span class="line">    rowHasChanged: (r1, r2)=&gt;&#123;r1 != r2&#125;,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">//2. 请求数据&apos;</span><br><span class="line">var foodArr = require(&apos;./Resource/food.json&apos;)</span><br><span class="line"></span><br><span class="line">//3. 设置数据</span><br><span class="line">datas = datas.cloneWithRows(foodArr)</span><br><span class="line"></span><br><span class="line">//5. 保存数据源</span><br><span class="line">this.state = &#123;</span><br><span class="line">    dataArr: datas</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>2). ListView实现</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;ListView style=&#123;&#123;backgroundColor:&apos;white&apos;, marginTop:20&#125;&#125;</span><br><span class="line">    //设置数据源</span><br><span class="line">          dataSource=&#123;this.state.dataArr&#125;</span><br><span class="line">    //渲染哪一行(设置cell样式)</span><br><span class="line">          renderRow=&#123;this._renderRow.bind(this)&#125;</span><br><span class="line">          //设置头部样式</span><br><span class="line">          renderHeader=&#123;this._renderHeader.bind(this)&#125;</span><br><span class="line">          //设置section的头部样式</span><br><span class="line">          renderSectionHeader=&#123;this._renderSectionHeader.bind(this)&#125;</span><br><span class="line">          //设置尾部样式</span><br><span class="line">          renderFooter=&#123;this._renderFooter.bind(this)&#125;</span><br><span class="line">          //设置分割线样式</span><br><span class="line">          renderSeparator=&#123;this._renderSeparator.bind(this)&#125;</span><br><span class="line">/&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>3). 相关属性方法介绍<ul>
<li>renderRow: 设置每行cell样式</li>
</ul>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">// 实现数据源方法,设置每行cell样式</span><br><span class="line">/*这个方法会自动传入四个参数(rowData,sectionID,rowID,highlightRow)</span><br><span class="line">rowData:当前行数据</span><br><span class="line">sectionID:当前行所在组ID</span><br><span class="line">rowID：哪一行的角标</span><br><span class="line">highlightRow:高亮函数</span><br><span class="line">*/</span><br><span class="line">    _renderRow(rowData, sectionID, rowID, highlightRow) &#123;</span><br><span class="line">        return (</span><br><span class="line">            &lt;View&gt;</span><br><span class="line">                &lt;Text&gt;&#123;rowData&#125;&lt;/Text&gt;</span><br><span class="line">            &lt;/View&gt;</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>ListView头部和尾部视图</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">//头部视图</span><br><span class="line"> _renderHeader() &#123;</span><br><span class="line">        return (</span><br><span class="line">            &lt;View&gt;</span><br><span class="line">                &lt;Text&gt;头部视图&lt;/Text&gt;</span><br><span class="line">            &lt;/View&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">//尾部视图</span><br><span class="line"> _renderFooter() &#123;</span><br><span class="line">        return (</span><br><span class="line">            &lt;View&gt;</span><br><span class="line">                &lt;Text&gt;尾部视图&lt;/Text&gt;</span><br><span class="line">            &lt;/View&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>renderSectionHeader: 设置每一个section的头部样式</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//sectionData: 每一组的头部数据</span><br><span class="line">//sectionID: 组ID</span><br><span class="line">_renderSectionHeader(sectionData, sectionID)&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>ListView分割线<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// 哪一组,哪一行,相邻行是否高亮</span><br><span class="line">   _renderSeparator(sectionID, rowID, adjacentRowHighlighted)  &#123;</span><br><span class="line">       console.log(sectionID,rowID,adjacentRowHighlighted);</span><br><span class="line">       return (</span><br><span class="line">           &lt;View style=&#123;&#123;height:1,backgroundColor:&apos;black&apos;&#125;&#125;&gt;&lt;/View&gt;</span><br><span class="line">       )</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></li>
</ul>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/ReactNaive/">ReactNaive</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CSS/">CSS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ListView/">ListView</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ScrollView/">ScrollView</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>











  
    <article id="post-Swift语音和文本的转换" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/12/10/Swift语音和文本的转换" class="article-date">
      <time datetime="2017-12-10T05:40:00.000Z" itemprop="datePublished">2017-12-10</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/12/10/Swift语音和文本的转换">Swift语音和文本的转换</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <blockquote>
<p>谈到语音和文本的转换, 就要说到语音转文本和文本转语音两大技术</p>
<ul>
<li>文本转语音是iOS7以后的技术, 用到的是AVFoundation框架</li>
<li>语音转文本是iOS10以后, 苹果发布的一个<a href="https://developer.apple.com/documentation/speech" target="_blank" rel="noopener">Speech</a>框架</li>
<li>下面先介绍一下简单的文本转语音</li>
<li><a href="https://github.com/CoderTitan/TextAndVoice" target="_blank" rel="noopener">GitHub上Demo地址</a></li>
<li>项目包括<ul>
<li>文本转语音</li>
<li>实时语音转文本</li>
<li>本地语音转文本</li>
<li>录音保存本地,转文本</li>
</ul>
</li>
</ul>
</blockquote>
<h2 id="一-文本转语音"><a href="#一-文本转语音" class="headerlink" title="一. 文本转语音"></a>一. 文本转语音</h2><ul>
<li>文本转语音技术, 简称TTS (是<code>Text To Speech</code>的缩写), <a href="https://developer.apple.com/documentation/avfoundation/speech_synthesis" target="_blank" rel="noopener">语音合成苹果官方文档</a></li>
<li>是苹果iOS7以后新增的功能, 使用AVFoundation 库</li>
<li>下面介绍一下需要用到的类</li>
</ul>
<h3 id="1-AVSpeechSynthesizer-语音合成器"><a href="#1-AVSpeechSynthesizer-语音合成器" class="headerlink" title="1. AVSpeechSynthesizer: 语音合成器"></a>1. <code>AVSpeechSynthesizer</code>: 语音合成器</h3><h4 id="1-1-属性"><a href="#1-1-属性" class="headerlink" title="1-1. 属性"></a>1-1. 属性</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//是否正在语音播放</span><br><span class="line">open var isSpeaking: Bool &#123; get &#125;</span><br><span class="line"></span><br><span class="line">//是否停止语音播放</span><br><span class="line">open var isPaused: Bool &#123; get &#125;</span><br></pre></td></tr></table></figure>
<h4 id="1-2-方法"><a href="#1-2-方法" class="headerlink" title="1-2. 方法"></a>1-2. 方法</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">//播放语音</span><br><span class="line">open func speak(_ utterance: AVSpeechUtterance)</span><br><span class="line"></span><br><span class="line">//停止语音播放</span><br><span class="line">open func stopSpeaking(at boundary: AVSpeechBoundary) -&gt; Bool</span><br><span class="line"></span><br><span class="line">//暂停语音播放</span><br><span class="line">open func pauseSpeaking(at boundary: AVSpeechBoundary) -&gt; Bool</span><br><span class="line"></span><br><span class="line">//继续语音播放</span><br><span class="line">open func continueSpeaking() -&gt; Bool</span><br><span class="line"></span><br><span class="line">//(iOS10以上, 输出通道)</span><br><span class="line">open var outputChannels: [AVAudioSessionChannelDescription]?</span><br></pre></td></tr></table></figure>
<h3 id="2-AVSpeechBoundary"><a href="#2-AVSpeechBoundary" class="headerlink" title="2. AVSpeechBoundary"></a>2. AVSpeechBoundary</h3><ul>
<li>描述语音可能被暂停或停止的枚举值</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">case immediate</span><br><span class="line">//表示发言应该暂停或立即停止。</span><br><span class="line"></span><br><span class="line">case word</span><br><span class="line">//说完整个词语之后再暂停或者停止</span><br></pre></td></tr></table></figure>
<h3 id="3-AVSpeechUtterance"><a href="#3-AVSpeechUtterance" class="headerlink" title="3. AVSpeechUtterance"></a>3. AVSpeechUtterance</h3><ul>
<li>可以将文本和成一段语音的类, 或者说就是一段要播放的语音<h4 id="3-1-属性"><a href="#3-1-属性" class="headerlink" title="3-1. 属性"></a>3-1. 属性</h4></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">//使用的声音</span><br><span class="line">open var voice: AVSpeechSynthesisVoice?</span><br><span class="line"></span><br><span class="line">//文本属性    </span><br><span class="line">open var speechString: String &#123; get &#125;</span><br><span class="line"></span><br><span class="line">//富文本属性</span><br><span class="line">@available(iOS 10.0, *)</span><br><span class="line">open var attributedSpeechString: NSAttributedString &#123; get &#125;</span><br><span class="line"></span><br><span class="line">//说话的速度    </span><br><span class="line">open var rate: Float </span><br><span class="line">//提供了两个语速 AVSpeechUtteranceMinimumSpeechRate和 AVSpeechUtteranceMaximumSpeechRate和AVSpeechUtteranceDefaultSpeechRate</span><br><span class="line"></span><br><span class="line">//说话的基线音高, [0.5 - 2] Default = 1   </span><br><span class="line">open var pitchMultiplier: Float </span><br><span class="line"></span><br><span class="line">//说话音量, [0-1] Default = 1</span><br><span class="line">open var volume: Float </span><br><span class="line"></span><br><span class="line">//开始一段语音之前等待的时间</span><br><span class="line">open var preUtteranceDelay: TimeInterval </span><br><span class="line"></span><br><span class="line">//语音合成器在当前语音结束之后处理下一个排队的语音之前需要等待的时间, 默认0.0 </span><br><span class="line">open var postUtteranceDelay: TimeInterval</span><br></pre></td></tr></table></figure>
<h4 id="3-2-初始化方法"><a href="#3-2-初始化方法" class="headerlink" title="3-2. 初始化方法"></a>3-2. 初始化方法</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">public init(string: String)</span><br><span class="line"></span><br><span class="line">@available(iOS 10.0, *)</span><br><span class="line">public init(attributedString string: NSAttributedString)</span><br></pre></td></tr></table></figure>
<h3 id="4-AVSpeechSynthesisVoice"><a href="#4-AVSpeechSynthesisVoice" class="headerlink" title="4. AVSpeechSynthesisVoice"></a>4. AVSpeechSynthesisVoice</h3><ul>
<li>用于语音合成的独特声音, 主要是不同的语言和地区</li>
<li>所支持的所有语言种类详见最底部附录</li>
</ul>
<h4 id="4-1-相关属性"><a href="#4-1-相关属性" class="headerlink" title="4-1. 相关属性"></a>4-1. 相关属性</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">//获得当前的语言</span><br><span class="line">open var language: String &#123; get &#125;</span><br><span class="line"></span><br><span class="line">//返回用户当前语言环境的代码</span><br><span class="line">@available(iOS 9.0, *)</span><br><span class="line">open var identifier: String &#123; get &#125;</span><br><span class="line"></span><br><span class="line">@available(iOS 9.0, *)</span><br><span class="line">open var name: String &#123; get &#125;</span><br><span class="line"></span><br><span class="line">@available(iOS 9.0, *)</span><br><span class="line">open var quality: AVSpeechSynthesisVoiceQuality &#123; get &#125;</span><br></pre></td></tr></table></figure>
<h4 id="4-2-相关方法"><a href="#4-2-相关方法" class="headerlink" title="4-2. 相关方法"></a>4-2. 相关方法</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">init?(language: String?)</span><br><span class="line">//返回指定语言和语言环境的语音对象。</span><br><span class="line"></span><br><span class="line">class func speechVoices()</span><br><span class="line">//返回所有可用的语音。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class func currentLanguageCode()</span><br><span class="line">//返回用户当前语言环境的代码。</span><br></pre></td></tr></table></figure>
<h3 id="5-AVSpeechSynthesizerDelegate代理"><a href="#5-AVSpeechSynthesizerDelegate代理" class="headerlink" title="5. AVSpeechSynthesizerDelegate代理"></a>5. AVSpeechSynthesizerDelegate代理</h3><ul>
<li>所有代理方法都是支持iOS7.0以上的系统</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">//开始播放</span><br><span class="line">optional public func speechSynthesizer(_ synthesizer: AVSpeechSynthesizer, didStart utterance: AVSpeechUtterance)</span><br><span class="line"></span><br><span class="line">//播放完成</span><br><span class="line">optional public func speechSynthesizer(_ synthesizer: AVSpeechSynthesizer, didFinish utterance: AVSpeechUtterance)</span><br><span class="line"></span><br><span class="line">//暂停播放</span><br><span class="line">optional public func speechSynthesizer(_ synthesizer: AVSpeechSynthesizer, didPause utterance: AVSpeechUtterance)</span><br><span class="line"></span><br><span class="line">//继续播放</span><br><span class="line">optional public func speechSynthesizer(_ synthesizer: AVSpeechSynthesizer, didContinue utterance: AVSpeechUtterance)</span><br><span class="line"></span><br><span class="line">//取消播放</span><br><span class="line">optional public func speechSynthesizer(_ synthesizer: AVSpeechSynthesizer, didCancel utterance: AVSpeechUtterance)</span><br><span class="line"></span><br><span class="line">//将要播放某一段话  </span><br><span class="line">optional public func speechSynthesizer(_ synthesizer: AVSpeechSynthesizer, willSpeakRangeOfSpeechString characterRange: NSRange, utterance: AVSpeechUtterance)</span><br></pre></td></tr></table></figure>
<h3 id="6-具体功能的核心代码"><a href="#6-具体功能的核心代码" class="headerlink" title="6. 具体功能的核心代码"></a>6. 具体功能的核心代码</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">//MARK: 开始/停止转换</span><br><span class="line">extension TextToVoiceController&#123;</span><br><span class="line">    //开始转换</span><br><span class="line">    fileprivate func startTranslattion()&#123;</span><br><span class="line">        //1. 创建需要合成的声音类型</span><br><span class="line">        let voice = AVSpeechSynthesisVoice(language: &quot;zh-CN&quot;)</span><br><span class="line">        </span><br><span class="line">        //2. 创建合成的语音类</span><br><span class="line">        let utterance = AVSpeechUtterance(string: textView.text)</span><br><span class="line">        utterance.rate = AVSpeechUtteranceDefaultSpeechRate</span><br><span class="line">        utterance.voice = voice</span><br><span class="line">        utterance.volume = 1</span><br><span class="line">        utterance.postUtteranceDelay = 0.1</span><br><span class="line">        utterance.pitchMultiplier = 1</span><br><span class="line">        //开始播放</span><br><span class="line">        avSpeech.speak(utterance)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    //暂停播放</span><br><span class="line">    fileprivate func pauseTranslation()&#123;</span><br><span class="line">        avSpeech.pauseSpeaking(at: .immediate)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    //继续播放</span><br><span class="line">    fileprivate func continueSpeek()&#123;</span><br><span class="line">        avSpeech.continueSpeaking()</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    //取消播放</span><br><span class="line">    fileprivate func cancleSpeek()&#123;</span><br><span class="line">        avSpeech.stopSpeaking(at: .immediate)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="二-语音转文本"><a href="#二-语音转文本" class="headerlink" title="二. 语音转文本"></a>二. 语音转文本</h2><ul>
<li>在2016 WWDC大会上，Apple公司介绍了一个很好的语音识别的API,那就是Speech框架</li>
<li>Speech框架支持iOS10以上系统</li>
<li><a href="https://developer.apple.com/documentation/speech" target="_blank" rel="noopener">Speech框架官方文档</a></li>
<li>下面简单介绍一下主要的操作类</li>
</ul>
<h3 id="1-SFSpeechRecognizer-语音识别器"><a href="#1-SFSpeechRecognizer-语音识别器" class="headerlink" title="1. SFSpeechRecognizer: 语音识别器"></a>1. <code>SFSpeechRecognizer</code>: 语音识别器</h3><ul>
<li>这个类是语音识别的操作类</li>
<li>用于语音识别用户权限的申请，语言环境的设置，语音模式的设置以及向Apple服务发送语音识别的请求</li>
<li>初始化方法</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">//这个初始化方法将默认以设备当前的语言环境作为语音识别的语言环境</span><br><span class="line">public convenience init?() </span><br><span class="line"></span><br><span class="line">//根据支持的语言初始化</span><br><span class="line">public init?(locale: Locale) </span><br><span class="line">//示例</span><br><span class="line">let recognize = SFSpeechRecognizer(locale: Locale(identifier: &quot;zh-CN&quot;))</span><br></pre></td></tr></table></figure>
<ul>
<li>类方法</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//获取所有支持的语言</span><br><span class="line">open class func supportedLocales() -&gt; Set&lt;Locale&gt;</span><br><span class="line"></span><br><span class="line">//获取当前用户权限状态</span><br><span class="line">open class func authorizationStatus() -&gt; SFSpeechRecognizerAuthorizationStatus</span><br><span class="line"></span><br><span class="line">//申请语音识别用户权限</span><br><span class="line">open class func requestAuthorization(_ handler: @escaping (SFSpeechRecognizerAuthorizationStatus) -&gt; Swift.Void)</span><br></pre></td></tr></table></figure>
<ul>
<li>其他属性</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">var isAvailable: Bool</span><br><span class="line">//指示语音识别器是否可用</span><br><span class="line"></span><br><span class="line">var locale: Locale</span><br><span class="line">//当前语音识别器的语言环境</span><br><span class="line"></span><br><span class="line">class func supportedLocales()</span><br><span class="line">//获取语音识别所有支持的语言</span><br><span class="line"></span><br><span class="line">var queue: OperationQueue</span><br><span class="line">//语音识别器用于识别任务处理程序和委托消息的队列</span><br></pre></td></tr></table></figure>
<ul>
<li>相关方法</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//识别与指定请求关联的音频来源的语音，使用指定的协议返回结果</span><br><span class="line">open func recognitionTask(with request: SFSpeechRecognitionRequest, resultHandler: @escaping (SFSpeechRecognitionResult?, Error?) -&gt; Swift.Void) -&gt; SFSpeechRecognitionTask</span><br><span class="line"></span><br><span class="line">//识别与指定请求关联的音频源的语音, 使用闭包结果</span><br><span class="line">open func recognitionTask(with request: SFSpeechRecognitionRequest, delegate: SFSpeechRecognitionTaskDelegate) -&gt; SFSpeechRecognitionTask</span><br></pre></td></tr></table></figure>
<ul>
<li>代理</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">weak var delegate: SFSpeechRecognizerDelegate? &#123; get set &#125;</span><br><span class="line"></span><br><span class="line">//代理方法: 监视语音识别器的可用性</span><br><span class="line">func speechRecognizer(SFSpeechRecognizer, availabilityDidChange: Bool)</span><br></pre></td></tr></table></figure>
<h3 id="2-SFSpeechRecognitionRequest"><a href="#2-SFSpeechRecognitionRequest" class="headerlink" title="2. SFSpeechRecognitionRequest"></a>2. <code>SFSpeechRecognitionRequest</code></h3><ul>
<li>语音识别请求类，需要通过其子类来进行实例化</li>
<li>相关属性</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">var contextualStrings: [String]</span><br><span class="line">//一系列应该被识别的语言种类</span><br><span class="line"></span><br><span class="line">var shouldReportPartialResults: Bool</span><br><span class="line">//是否获取每个语句的最终结果。</span><br><span class="line"></span><br><span class="line">var taskHint: SFSpeechRecognitionTaskHint</span><br><span class="line">//正在执行的语音识别的类型</span><br><span class="line"></span><br><span class="line">var interactionIdentifier: String?</span><br><span class="line">//标识与请求关联的识别请求对象的字符串</span><br></pre></td></tr></table></figure>
<ul>
<li>子类<ul>
<li><code>SFSpeechURLRecognitionRequest</code></li>
<li><code>SFSpeechAudioBufferRecognitionRequest</code></li>
</ul>
</li>
</ul>
<h4 id="2-1-SFSpeechURLRecognitionRequest"><a href="#2-1-SFSpeechURLRecognitionRequest" class="headerlink" title="2-1. SFSpeechURLRecognitionRequest"></a>2-1. <code>SFSpeechURLRecognitionRequest</code></h4><ul>
<li>通过制定的URL路径识别本地的语音</li>
<li>方法和属性</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//创建一个语音识别请求，使用指定的URL进行初始化</span><br><span class="line">public init(url URL: URL)</span><br><span class="line"></span><br><span class="line">//获取当前的usl路径    </span><br><span class="line">open var url: URL &#123; get &#125;</span><br></pre></td></tr></table></figure>
<h4 id="2-2-SFSpeechAudioBufferRecognitionRequest"><a href="#2-2-SFSpeechAudioBufferRecognitionRequest" class="headerlink" title="2-2. SFSpeechAudioBufferRecognitionRequest"></a>2-2. <code>SFSpeechAudioBufferRecognitionRequest</code></h4><ul>
<li>识别音频缓冲区中提供的语音的请求</li>
<li>识别即时语音, 类似于iPhone 中的Siri</li>
<li><a href="https://developer.apple.com/documentation/speech/sfspeechaudiobufferrecognitionrequest" target="_blank" rel="noopener">官方文档</a></li>
<li>音频缓冲区相关方法属性</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">func append(AVAudioPCMBuffer)</span><br><span class="line">//将PCM格式的音频追加到识别请求的末尾。</span><br><span class="line"></span><br><span class="line">func appendAudioSampleBuffer(CMSampleBuffer)</span><br><span class="line">//将音频附加到识别请求的末尾。</span><br><span class="line"></span><br><span class="line">func endAudio()</span><br><span class="line">//完成输入</span><br></pre></td></tr></table></figure>
<ul>
<li>获取音频格式</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var nativeAudioFormat: AVAudioFormat</span><br><span class="line">//用于最佳语音识别的首选音频格式。</span><br></pre></td></tr></table></figure>
<h3 id="3-SFSpeechRecognitionTask"><a href="#3-SFSpeechRecognitionTask" class="headerlink" title="3. SFSpeechRecognitionTask"></a>3. <code>SFSpeechRecognitionTask</code></h3><ul>
<li>语音识别请求结果类</li>
<li>语音识别任务，监视识别进度</li>
<li>相关方法属性</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">func cancel()</span><br><span class="line">//取消当前的语音识别任务。</span><br><span class="line"></span><br><span class="line">var isCancelled: Bool</span><br><span class="line">//语音识别任务是否已被取消。</span><br><span class="line"></span><br><span class="line">func finish()</span><br><span class="line">//停止接受新的音频，并完成已接受的音频输入处理</span><br><span class="line"></span><br><span class="line">var isFinishing: Bool</span><br><span class="line">//音频输入是否已停止。</span><br><span class="line"></span><br><span class="line">var state: SFSpeechRecognitionTaskState</span><br><span class="line">//获取语音识别任务的当前状态。</span><br><span class="line"></span><br><span class="line">var error: Error?</span><br><span class="line">//在语音识别任务期间发生的错误的错误对象。</span><br></pre></td></tr></table></figure>
<h4 id="3-1-SFSpeechRecognitionTaskDelegate协议"><a href="#3-1-SFSpeechRecognitionTaskDelegate协议" class="headerlink" title="3-1. SFSpeechRecognitionTaskDelegate协议"></a>3-1. <code>SFSpeechRecognitionTaskDelegate</code>协议</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">//当开始检测音频源中的语音时首先调用此方法</span><br><span class="line">optional public func speechRecognitionDidDetectSpeech(_ task: SFSpeechRecognitionTask)</span><br><span class="line"></span><br><span class="line">//当识别出一条可用的信息后 会调用</span><br><span class="line">//apple的语音识别服务会根据提供的音频源识别出多个可能的结果 每有一条结果可用 都会调用此方法</span><br><span class="line">optional public func speechRecognitionTask(_ task: SFSpeechRecognitionTask, didHypothesizeTranscription transcription: SFTranscription)</span><br><span class="line"></span><br><span class="line">//当识别完成所有可用的结果后调用</span><br><span class="line">optional public func speechRecognitionTask(_ task: SFSpeechRecognitionTask, didFinishRecognition recognitionResult: SFSpeechRecognitionResult)</span><br><span class="line"></span><br><span class="line">//当不再接受音频输入时调用 即开始处理语音识别任务时调用   </span><br><span class="line">optional public func speechRecognitionTaskFinishedReadingAudio(_ task: SFSpeechRecognitionTask)</span><br><span class="line"></span><br><span class="line">//当语音识别任务被取消时调用    </span><br><span class="line">optional public func speechRecognitionTaskWasCancelled(_ task: SFSpeechRecognitionTask)</span><br><span class="line"></span><br><span class="line">//语音识别任务完成时被调用    </span><br><span class="line">optional public func speechRecognitionTask(_ task: SFSpeechRecognitionTask, didFinishSuccessfully successfully: Bool)</span><br></pre></td></tr></table></figure>
<h3 id="4-SFTranscription"><a href="#4-SFTranscription" class="headerlink" title="4. SFTranscription"></a>4. SFTranscription</h3><ul>
<li>语音转换后的信息类, 包含改短语音信息的类</li>
<li>你所说的一句话，可能是有好几个词语拼成的，<code>formattedString</code>就是你所说的那句话，<code>segments</code>就是你所说的你那句话的组成每个单词的集合</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//返回了一条表达语音译文的字符数据</span><br><span class="line">open var formattedString: String &#123; get &#125;</span><br><span class="line"></span><br><span class="line">//所有的可能的识别数据</span><br><span class="line">open var segments: [SFTranscriptionSegment] &#123; get &#125;</span><br></pre></td></tr></table></figure>
<h3 id="5-SFTranscriptionSegment"><a href="#5-SFTranscriptionSegment" class="headerlink" title="5. SFTranscriptionSegment"></a>5. SFTranscriptionSegment</h3><ul>
<li>语音转换中的音频节点类</li>
<li>相关属性</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">//当前节点识别后的文本信息</span><br><span class="line">open var substring: String &#123; get &#125;</span><br><span class="line"></span><br><span class="line">//当前节点识别后的文本信息在整体识别语句中的位置</span><br><span class="line">open var substringRange: NSRange &#123; get &#125;</span><br><span class="line"></span><br><span class="line">//当前节点的音频时间戳</span><br><span class="line">open var timestamp: TimeInterval &#123; get &#125;</span><br><span class="line"></span><br><span class="line">//当前节点音频的持续时间</span><br><span class="line">open var duration: TimeInterval &#123; get &#125;</span><br><span class="line"></span><br><span class="line">//可信度/准确度 0-1之间</span><br><span class="line">open var confidence: Float &#123; get &#125;</span><br><span class="line"></span><br><span class="line">//关于此节点的其他可能的识别结果 </span><br><span class="line">open var alternativeSubstrings: [String] &#123; get &#125;</span><br></pre></td></tr></table></figure>
<h3 id="6-SFSpeechRecognitionResult-语音识别结果类"><a href="#6-SFSpeechRecognitionResult-语音识别结果类" class="headerlink" title="6. SFSpeechRecognitionResult: 语音识别结果类"></a>6. <code>SFSpeechRecognitionResult</code>: 语音识别结果类</h3><ul>
<li>是语音识别结果的封装，其中包含了许多套平行的识别信息，其每一份识别信息都有可信度属性来描述其准确程度</li>
<li>该类只是语音识别结果的一个封装，真正的识别信息定义在SFTranscription类中</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//准确性最高的识别实例</span><br><span class="line">@NSCopying open var bestTranscription: SFTranscription &#123; get &#125;</span><br><span class="line"></span><br><span class="line">//识别到的多套语音转换信息数组 其会按照准确度进行排序</span><br><span class="line">open var transcriptions: [SFTranscription] &#123; get &#125;</span><br><span class="line"></span><br><span class="line">//是否已经完成 如果YES 则所有所有识别信息都已经获取完成</span><br><span class="line">open var isFinal: Bool &#123; get &#125;</span><br></pre></td></tr></table></figure>
<h2 id="三-语音识别转文本"><a href="#三-语音识别转文本" class="headerlink" title="三. 语音识别转文本"></a>三. 语音识别转文本</h2><ul>
<li>添加Speech框架<ul>
<li><code>import Speech</code></li>
</ul>
</li>
<li><code>info.plist</code>必须添加相关权限</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Privacy - Speech Recognition Usage Description</span><br><span class="line">//语音识别权限</span><br><span class="line"></span><br><span class="line">Privacy - Microphone Usage Description</span><br><span class="line">//麦克风使用权限</span><br></pre></td></tr></table></figure>
<ul>
<li>判断用户授权<ul>
<li>在使用speech framework做语音识别之前，你必须首先得到用户的允许</li>
<li>因为不仅仅只有本地的ios设备会进行识别，苹果的服务器也会识别</li>
<li>所有的语音数据都会被传递到苹果的后台进行处理</li>
<li>因此，获取用户授权是强制必须的</li>
</ul>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">///语音识别权限认证</span><br><span class="line">fileprivate func addSpeechRecordLimit()&#123;</span><br><span class="line">    SFSpeechRecognizer.requestAuthorization &#123; (state) in</span><br><span class="line">        var isEnable = false</span><br><span class="line">        switch state &#123;</span><br><span class="line">        case .authorized:</span><br><span class="line">            isEnable = true</span><br><span class="line">            print(&quot;已授权语音识别&quot;)</span><br><span class="line">        case .notDetermined:</span><br><span class="line">            isEnable = false</span><br><span class="line">            print(&quot;没有授权语音识别&quot;)</span><br><span class="line">        case .denied:</span><br><span class="line">            isEnable = false</span><br><span class="line">            print(&quot;用户已拒绝访问语音识别&quot;)</span><br><span class="line">        case .restricted:</span><br><span class="line">            isEnable = false</span><br><span class="line">            print(&quot;不能在该设备上进行语音识别&quot;)</span><br><span class="line">        &#125;</span><br><span class="line">        DispatchQueue.main.async &#123;</span><br><span class="line">            self.recordBtn.isEnabled = isEnable</span><br><span class="line">            self.recordBtn.backgroundColor = isEnable ? UIColor(red: 255/255.0, green: 64/255.0, blue: 64/255.0, alpha: 1) : UIColor.lightGray</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>再然后就是初始化相关请求和识别类处理相关语音</li>
<li><a href="https://github.com/CoderTitan/TextAndVoice" target="_blank" rel="noopener">详细代码参考GitHub的Demo地址</a></li>
</ul>
<hr>
<h2 id="附录"><a href="#附录" class="headerlink" title="附录:"></a>附录:</h2><h3 id="AVSpeechSynthesisVoice支持的语言种类"><a href="#AVSpeechSynthesisVoice支持的语言种类" class="headerlink" title="AVSpeechSynthesisVoice支持的语言种类"></a><code>AVSpeechSynthesisVoice</code>支持的语言种类</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">ar-SA  沙特阿拉伯（阿拉伯文）</span><br><span class="line"></span><br><span class="line">en-ZA, 南非（英文）</span><br><span class="line"></span><br><span class="line">nl-BE, 比利时（荷兰文）</span><br><span class="line"></span><br><span class="line">en-AU, 澳大利亚（英文）</span><br><span class="line"></span><br><span class="line">th-TH, 泰国（泰文）</span><br><span class="line"></span><br><span class="line">de-DE, 德国（德文）</span><br><span class="line"></span><br><span class="line">en-US, 美国（英文）</span><br><span class="line"></span><br><span class="line">pt-BR, 巴西（葡萄牙文）</span><br><span class="line"></span><br><span class="line">pl-PL, 波兰（波兰文）</span><br><span class="line"></span><br><span class="line">en-IE, 爱尔兰（英文）</span><br><span class="line"></span><br><span class="line">el-GR, 希腊（希腊文）</span><br><span class="line"></span><br><span class="line">id-ID, 印度尼西亚（印度尼西亚文）</span><br><span class="line"></span><br><span class="line">sv-SE, 瑞典（瑞典文）</span><br><span class="line"></span><br><span class="line">tr-TR, 土耳其（土耳其文）</span><br><span class="line"></span><br><span class="line">pt-PT, 葡萄牙（葡萄牙文）</span><br><span class="line"></span><br><span class="line">ja-JP, 日本（日文）</span><br><span class="line"></span><br><span class="line">ko-KR, 南朝鲜（朝鲜文）</span><br><span class="line"></span><br><span class="line">hu-HU, 匈牙利（匈牙利文）</span><br><span class="line"></span><br><span class="line">cs-CZ, 捷克共和国（捷克文）</span><br><span class="line"></span><br><span class="line">da-DK, 丹麦（丹麦文）</span><br><span class="line"></span><br><span class="line">es-MX, 墨西哥（西班牙文）</span><br><span class="line"></span><br><span class="line">fr-CA, 加拿大（法文）</span><br><span class="line"></span><br><span class="line">nl-NL, 荷兰（荷兰文）</span><br><span class="line"></span><br><span class="line">fi-FI, 芬兰（芬兰文）</span><br><span class="line"></span><br><span class="line">es-ES, 西班牙（西班牙文）</span><br><span class="line"></span><br><span class="line">it-IT, 意大利（意大利文）</span><br><span class="line"></span><br><span class="line">he-IL, 以色列（希伯莱文，阿拉伯文）</span><br><span class="line"></span><br><span class="line">no-NO, 挪威（挪威文）</span><br><span class="line"></span><br><span class="line">ro-RO, 罗马尼亚（罗马尼亚文）</span><br><span class="line"></span><br><span class="line">zh-HK, 香港（中文）</span><br><span class="line"></span><br><span class="line">zh-TW, 台湾（中文）</span><br><span class="line"></span><br><span class="line">sk-SK, 斯洛伐克（斯洛伐克文）</span><br><span class="line"></span><br><span class="line">zh-CN, 中国（中文）</span><br><span class="line"></span><br><span class="line">ru-RU, 俄罗斯（俄文）</span><br><span class="line"></span><br><span class="line">en-GB, 英国（英文）</span><br><span class="line"></span><br><span class="line">fr-FR, 法国（法文）</span><br><span class="line"></span><br><span class="line">hi-IN  印度（印度文）</span><br></pre></td></tr></table></figure>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/Swift黑科技/">Swift黑科技</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Speech/">Speech</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Swift/">Swift</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>











  
    <article id="post-Swift之Vision 图像识别框架" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/11/29/Swift之Vision 图像识别框架" class="article-date">
      <time datetime="2017-11-29T06:58:00.000Z" itemprop="datePublished">2017-11-29</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/11/29/Swift之Vision 图像识别框架">Swift之Vision 图像识别框架</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
              <ul>
<li>2017年苹果大大又推出了新机型iPhone 8和iPhone 8Plus, 这还不是重点, 重点是那一款价值9000RMB的iPhone X, 虽说网上吐槽声从未停止过, 但是我觉得还是不错的哈!</li>
<li>软件方面, 苹果大大也推出了iOS 11, 经本人iPhone 7手机亲测, 耗电快外加通知栏改不完的bug</li>
<li>当然了随着iOS 11的推出, 也随之推出了一些新的API，如：<a href="https://developer.apple.com/documentation/arkit" target="_blank" rel="noopener"><code>ARKit</code></a> 、<a href="https://developer.apple.com/documentation/coreml" target="_blank" rel="noopener"><code>Core ML</code></a>、<a href="https://developer.apple.com/documentation/fileprovider" target="_blank" rel="noopener"><code>FileProvider</code></a>、<a href="https://developer.apple.com/documentation/identitylookup" target="_blank" rel="noopener"><code>IdentityLookup</code></a> 、<a href="https://developer.apple.com/documentation/corenfc" target="_blank" rel="noopener"><code>Core NFC</code></a>、<a href="https://developer.apple.com/documentation/vision" target="_blank" rel="noopener"><code>Vison</code></a> 等。</li>
<li>这里我们还要说的就是Apple 在 WWDC 2017 推出的图像识别框架–<code>Vison</code><a href="https://developer.apple.com/documentation/vision" target="_blank" rel="noopener">官方文档</a></li>
<li><a href="https://github.com/coderQuanjun/JunVisionFace" target="_blank" rel="noopener">Demo地址</a></li>
</ul>
<p><excerpt in="" index="" |="" 首页摘要=""><br>
          
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/Swift黑科技/">Swift黑科技</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Swift/">Swift</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Vision/">Vision</a></li></ul>
    </div>

      
        <p class="article-more-link">
          <a href="/2017/11/29/Swift之Vision 图像识别框架#more">阅读全文 >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>











  
    <article id="post-iOS黑科技之(AVFoundation)动态人脸识别(二)" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/11/22/iOS黑科技之(AVFoundation)动态人脸识别(二)" class="article-date">
      <time datetime="2017-11-22T06:50:00.000Z" itemprop="datePublished">2017-11-22</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/11/22/iOS黑科技之(AVFoundation)动态人脸识别(二)">iOS黑科技之(AVFoundation)动态人脸识别(二)</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
              <blockquote>
<p>人脸识别原理简介：每一张图片都是由每一个像素点组成，而每一个像素点中又有对应的颜色值(如RGB)，人的面部特征中，不同的五官，颜色值肯定存在差异，而人脸识别技术就是通过对照片中每一个像素的识别进行大量的算法处理，最终得出五官的轮廓</p>
</blockquote>
          
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/Swift黑科技/">Swift黑科技</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/AVFoundation/">AVFoundation</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Swift/">Swift</a></li></ul>
    </div>

      
        <p class="article-more-link">
          <a href="/2017/11/22/iOS黑科技之(AVFoundation)动态人脸识别(二)#more">阅读全文 >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>











  
    <article id="post-iOS黑科技之(CoreImage)静态人脸识别(一)" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/11/22/iOS黑科技之(CoreImage)静态人脸识别(一)" class="article-date">
      <time datetime="2017-11-22T06:39:00.000Z" itemprop="datePublished">2017-11-22</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/11/22/iOS黑科技之(CoreImage)静态人脸识别(一)">iOS黑科技之(CoreImage)静态人脸识别(一)</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
              <blockquote>
<p>人脸识别原理简介：每一张图片都是由每一个像素点组成，而每一个像素点中又有对应的颜色值(如RGB)，人的面部特征中，不同的五官，颜色值肯定存在差异，而人脸识别技术就是通过对照片中每一个像素的识别进行大量的算法处理，最终得出五官的轮廓</p>
</blockquote>
          
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/Swift黑科技/">Swift黑科技</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/AVFoundation/">AVFoundation</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CIDetector/">CIDetector</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CoreImage/">CoreImage</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Swift/">Swift</a></li></ul>
    </div>

      
        <p class="article-more-link">
          <a href="/2017/11/22/iOS黑科技之(CoreImage)静态人脸识别(一)#more">阅读全文 >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>











  
    <article id="post-Swift之二维码的生成、识别和扫描" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/11/16/Swift之二维码的生成、识别和扫描" class="article-date">
      <time datetime="2017-11-16T08:00:00.000Z" itemprop="datePublished">2017-11-16</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/11/16/Swift之二维码的生成、识别和扫描">Swift之二维码的生成、识别和扫描</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
              <blockquote>
<p>最近在项目中遇到了涉及二维码相关的问题, 这里想记录总结一下二维码相关技术</p>
</blockquote>
<p><excerpt in="" index="" |="" 首页摘要=""><br>
          
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/Swift黑科技/">Swift黑科技</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/AVFoundation/">AVFoundation</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CIDetector/">CIDetector</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CIFilter/">CIFilter</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Swift/">Swift</a></li></ul>
    </div>

      
        <p class="article-more-link">
          <a href="/2017/11/16/Swift之二维码的生成、识别和扫描#more">阅读全文 >></a>
        </p>
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>











  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                <i class="fa fa-copyright"></i> 
                2016-2018 RuningTitan
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank" title="快速、简洁且高效的博客框架">Hexo</a>  Theme <a href="https://github.com/MOxFIVE/hexo-theme-yelee" target="_blank" title="简而不减 Hexo 双栏博客主题  v3.5">Yelee</a> by MOxFIVE <i class="fa fa-heart animated infinite pulse"></i>
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style='display:none'>
                        <span id="site-visit" title="本站到访数"><i class="fa fa-user" aria-hidden="true"></i><span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>| </span>
                
                
                    <span id="busuanzi_container_page_pv" style='display:none'>
                        <span id="page-visit"  title="本页阅读量"><i class="fa fa-eye animated infinite pulse" aria-hidden="true"></i><span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>
    </div>
    
<script data-main="/js/main.js" src="//cdn.bootcss.com/require.js/2.2.0/require.min.js"></script>


    

     




    <script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script src="//cdn.bootcss.com/mathjax/2.6.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


<div class="scroll" id="scroll">
    <a href="#" title="返回顶部"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments" onclick="load$hide();" title="查看评论"><i class="fa fa-comments-o"></i></a>
    <a href="#footer" title="转到底部"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    // Open in New Window
    
        var oOpenInNew = {
            
            
             post: ".article-entry a[href], .copyright a[href]", 
            
            
            
             archives: ".archive-article-title", 
             miniArchives: "a.post-list-link", 
            
             friends: "#js-friends a", 
             socail: ".social a" 
        }
        for (var x in oOpenInNew) {
            $(oOpenInNew[x]).attr("target", "_blank");
        }
    
</script>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
  </div>
</body>
</html>